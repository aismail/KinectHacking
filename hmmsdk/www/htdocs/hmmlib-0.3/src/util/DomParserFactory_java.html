<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML lang="en"><HEAD>
<META http-equiv="Generator" content="com.bluecraft.htmlize">
<TITLE>Source Code: DomParserFactory.java</TITLE>
<STYLE>
body {
    background: ivory;
    color: black;
}
DIV.description {
    color: maroon;
    margin-top: -0.4cm;
}
SPAN.linenumber {
    color: maroon;
}
SPAN.string {
    color: red;
}
SPAN.comment {
    color: green;
}
SPAN.keyword {
    color: blue;
}
SPAN.userkeyword {
    color: purple;
    font-weight: bold;
}
</STYLE>
</HEAD><BODY>
<H2>DomParserFactory.java</H2>
<DIV class="description">
Generated by <STRONG>com.bluecraft.htmlize</STRONG> HTML-ization Utility Classes.
</DIV>
<PRE>
<SPAN class="comment">//////////////////////////////////////////////////////////////////////////
</SPAN><SPAN class="comment">// The contents of this file are subject to the Mozilla Public License
</SPAN><SPAN class="comment">// Version 1.0 (the "License"); you may not use this file except in
</SPAN><SPAN class="comment">// compliance with the License. You may obtain a copy of the License at
</SPAN><SPAN class="comment">// http://www.mozilla.org/MPL/
</SPAN><SPAN class="comment">//
</SPAN><SPAN class="comment">// Software distributed under the License is distributed on an "AS IS"
</SPAN><SPAN class="comment">// basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
</SPAN><SPAN class="comment">// License for the specific language governing rights and limitations under
</SPAN><SPAN class="comment">// the License.
</SPAN><SPAN class="comment">//
</SPAN><SPAN class="comment">// The Original Code is Hidden Markov Model Library in Java.
</SPAN><SPAN class="comment">//
</SPAN><SPAN class="comment">// The Initial Developer of the Original Code is Hyoungsoo Yoon.
</SPAN><SPAN class="comment">// Portions created by Hyoungsoo Yoon are
</SPAN><SPAN class="comment">// Copyright (C) 1999 Hyoungsoo Yoon.  All Rights Reserved.
</SPAN><SPAN class="comment">//
</SPAN><SPAN class="comment">// Contributor(s):
</SPAN><SPAN class="comment">//
</SPAN><SPAN class="comment">//////////////////////////////////////////////////////////////////////////
</SPAN>

<SPAN class="comment">/**
Hidden Markov Model Library in Java.
Please refer to Rabiner 1989.
All algorithms are directly taken from this article.
Notations and variable names also closely follow the conventions used in this paper.

@copyright  Hyoungsoo Yoon
@date  Feb 21st, 1999
*/</SPAN>
<SPAN class="keyword">package</SPAN> com.bluecraft.hmm.util;


<SPAN class="keyword">import</SPAN> org.w3c.dom.*;
<SPAN class="keyword">import</SPAN> com.ibm.xml.parser.*;
<SPAN class="keyword">import</SPAN> com.sun.xml.tree.*;

<SPAN class="keyword">import</SPAN> java.io.*;
<SPAN class="keyword">import</SPAN> java.util.*;
     

<SPAN class="comment">/**
DomParserFactory is a wrapper class for XML parsers.
This class exposes only DOM interfaces.
(e.g. SAX interfaces are hidden regardless of parsers used.)
Currently, only sun and ibm parsers are included
in order to facilitate easy distribution.

@author  Hyoungsoo Yoon
@version  0.3
*/</SPAN>
<SPAN class="keyword">public</SPAN> <SPAN class="keyword">class</SPAN> DomParserFactory <SPAN class="keyword">implements</SPAN> XmlParserList {
    
    <SPAN class="comment">//&lt;Static_Fields&gt;
</SPAN>    <SPAN class="keyword">final</SPAN> <SPAN class="keyword">static</SPAN> <SPAN class="keyword">boolean</SPAN> DEBUG = <SPAN class="keyword">false</SPAN>;  <SPAN class="comment">// Not used at the moment.
</SPAN>    <SPAN class="keyword">static</SPAN> String PARSER_NAME = <SPAN class="keyword">null</SPAN>;
    <SPAN class="comment">//&lt;/Static_Fields&gt;
</SPAN>

    <SPAN class="comment">//&lt;Private_Fields&gt;
</SPAN>    <SPAN class="comment">//&lt;/Private_Fields&gt;
</SPAN>

    <SPAN class="comment">//&lt;Protectd_Fields&gt;
</SPAN>    <SPAN class="comment">//&lt;/Protectd_Fields&gt;
</SPAN>    
    
    <SPAN class="comment">//&lt;Public_Fields&gt;
</SPAN>    <SPAN class="comment">//&lt;/Public_Fields&gt;
</SPAN>

    <SPAN class="comment">//&lt;Constructors&gt;
</SPAN>    <SPAN class="comment">/**
    This is a "factory" class, and hence the constructor is private.
    */</SPAN>
    <SPAN class="keyword">private</SPAN> DomParserFactory() {
    }
    <SPAN class="comment">//&lt;/Constructors&gt;
</SPAN>
    
    <SPAN class="comment">//&lt;Private_Methods&gt;
</SPAN>    <SPAN class="comment">//&lt;/Private_Methods&gt;
</SPAN>    
    
    <SPAN class="comment">//&lt;Protectd_Methods&gt;
</SPAN>    <SPAN class="comment">//&lt;/Protectd_Methods&gt;
</SPAN>

    <SPAN class="comment">//&lt;Public_Methods&gt;
</SPAN>    <SPAN class="comment">/**
    Selects the parser to be used.
    Parser name is defined in the interface, XmlParserList.
    @param name Name of the parser to be created.
    */</SPAN>
    <SPAN class="keyword">public</SPAN> <SPAN class="keyword">static</SPAN> <SPAN class="keyword">void</SPAN> setParser(String name) {
         PARSER_NAME = name;
    }

    <SPAN class="comment">/**
    Creates a new (empty) document.
    It calls the constructor of appropriate (sub)class
    according to the parser selected (PARSER_NAME).
    @return  org.w3c.dom.Document if successful, otherwise null.
    */</SPAN>
    <SPAN class="keyword">public</SPAN> <SPAN class="keyword">static</SPAN> Document newDocument() {
        Document doc = <SPAN class="keyword">null</SPAN>;

        <SPAN class="keyword">if</SPAN>(PARSER_NAME.equals(IBM_PARSER)) {
            doc = <SPAN class="keyword">new</SPAN> TXDocument();
        } <SPAN class="keyword">else</SPAN> <SPAN class="keyword">if</SPAN>(PARSER_NAME.equals(SUN_PARSER)) {
            doc = <SPAN class="keyword">new</SPAN> XmlDocument();
        } <SPAN class="keyword">else</SPAN> {
	    <SPAN class="comment">// Only two parsers are supported at the moment.
</SPAN>            System.err.println(<SPAN class="string">"Parser name not recognized!"</SPAN>);
        }

        <SPAN class="keyword">return</SPAN> doc;
    }

    <SPAN class="comment">/**
    Creates a new (empty) document with the given file name.
    It calls the constructor of appropriate (sub)class
    according to the parser selected (PARSER_NAME).
    @param  fileName name of an XML file to be associated with the document.
    @return  org.w3c.dom.Document if successful, otherwise null.
    */</SPAN>
    <SPAN class="keyword">public</SPAN> <SPAN class="keyword">static</SPAN> Document newLocalDocument(String fileName) {
        Document doc = <SPAN class="keyword">null</SPAN>;

        <SPAN class="keyword">if</SPAN>(fileName == <SPAN class="keyword">null</SPAN>) {
            <SPAN class="keyword">return</SPAN> newDocument();
        }

        <SPAN class="keyword">if</SPAN>(PARSER_NAME.equals(IBM_PARSER)) {
            <SPAN class="comment">// Not implemented yet.
</SPAN>        } <SPAN class="keyword">else</SPAN> <SPAN class="keyword">if</SPAN>(PARSER_NAME.equals(SUN_PARSER)) {
            <SPAN class="comment">// Not implemented yet.
</SPAN>        } <SPAN class="keyword">else</SPAN> {
	    <SPAN class="comment">// Only two parsers are supported at the moment.
</SPAN>            System.err.println(<SPAN class="string">"Parser name not recognized!"</SPAN>);
        }

        <SPAN class="keyword">return</SPAN> doc;
    }


    <SPAN class="comment">/**
    Opens a document with the given file name.
    It calls the constructor of appropriate (sub)class
    according to the parser selected (PARSER_NAME).
    @param  fileName name of an XML file to be associated with the document.
    @return  org.w3c.dom.Document if successful, otherwise null.
    */</SPAN>
    <SPAN class="keyword">public</SPAN> <SPAN class="keyword">static</SPAN> Document openLocalDocument(String fileName) {
        Document doc = <SPAN class="keyword">null</SPAN>;

        <SPAN class="keyword">if</SPAN>(PARSER_NAME.equals(IBM_PARSER)) {
            <SPAN class="keyword">if</SPAN> (fileName != <SPAN class="keyword">null</SPAN>) {
                InputStream is;
                <SPAN class="keyword">try</SPAN> {
                    is = <SPAN class="keyword">new</SPAN> FileInputStream(fileName);
                } <SPAN class="keyword">catch</SPAN> (FileNotFoundException notFound) {
                    System.err.println(notFound);
                    <SPAN class="keyword">return</SPAN> <SPAN class="keyword">null</SPAN>;
                }

                Parser parser = <SPAN class="keyword">new</SPAN> Parser(fileName);
                <SPAN class="comment">// Set some parser options here
</SPAN>                parser.setPreserveSpace(<SPAN class="keyword">false</SPAN>);
                parser.setKeepComment(<SPAN class="keyword">false</SPAN>);
                doc = parser.readStream(is);
            } <SPAN class="keyword">else</SPAN> {
               <SPAN class="comment">// Not implemented yet.
</SPAN>            }
        } <SPAN class="keyword">else</SPAN> <SPAN class="keyword">if</SPAN>(PARSER_NAME.equals(SUN_PARSER)) {
            <SPAN class="keyword">if</SPAN> (fileName != <SPAN class="keyword">null</SPAN>) {
                <SPAN class="keyword">try</SPAN> {
                    <SPAN class="comment">// turn the filename into a fully qualified URL
</SPAN>                    String uri = <SPAN class="string">"file:"</SPAN> + <SPAN class="keyword">new</SPAN> File(fileName).getAbsolutePath();
                    doc = XmlDocumentBuilder.createXmlDocument(uri);
               } <SPAN class="keyword">catch</SPAN>(Exception e) {
                   e.printStackTrace();
               }
            } <SPAN class="keyword">else</SPAN> {
               <SPAN class="comment">// Not implemented yet.
</SPAN>            }
        } <SPAN class="keyword">else</SPAN> {
            <SPAN class="comment">// Only two parsers are supported at the moment.
</SPAN>            System.err.println(<SPAN class="string">"Parser name not recognized!"</SPAN>);
        }

        <SPAN class="keyword">return</SPAN> doc;
    }
    <SPAN class="comment">//&lt;/Public_Methods&gt;
</SPAN>

    <SPAN class="comment">//&lt;Main_Method&gt;
</SPAN>    <SPAN class="comment">/**
    This function is provided for testing purposes.
    First, it sets the parser,
    then opens a local document,
    and finally perfoms operations defined by DOM interfaces.
    No error checking is done.
    */</SPAN>
    <SPAN class="keyword">public</SPAN> <SPAN class="keyword">static</SPAN> <SPAN class="keyword">void</SPAN> main(String[] args) {

        DomParserFactory.setParser(SUN_PARSER);
        Document doc = DomParserFactory.openLocalDocument(<SPAN class="string">"hmm.xml"</SPAN>);
        
        NodeList listOfPersons = 
            doc.getElementsByTagName( <SPAN class="string">"element"</SPAN> );
        <SPAN class="keyword">int</SPAN> numberOfPersons = listOfPersons.getLength();

        System.out.println(<SPAN class="string">"Number: "</SPAN> + numberOfPersons);
    }
    <SPAN class="comment">//&lt;/Main_Method&gt;
</SPAN>}
</PRE>
</BODY></HTML>
